# Requirements: HAP Annotation Attachment & Manipulation

与此前实现sequence相关的功能相类似，现在请你在本项目上实现注释相关的功能。仔细阅读、理解prd.md，基于现有数据表设计，实现如下需求：

归纳不同注释在hap数据模型下的通用属性项，设计完善的annotation表，再为不同类型的注释设计所需的额外表/属性项；

将source对象重命名为genome，新增path对象的数据表及和其他对象（genome,subgraph,segment等）的关联，path为每个不可分割的subgraph中的基因组路径，由build时输入的gfa文件中的路径行得来；path_segment_coordinate表应记录path的不同坐标区间对应的segment_id（由原图中结点id通过segment_original_id表得到）及segment在path上的顺序；

在build命令中的gfa验证环节当中增加对路径信息（包括gfa的各种版本）的验证，确保作为构建来源的gfa文件有格式和内容正确并且信息有效的路径数据；如果验证失败，直接显示错误信息并退出程序，不予进行hap的构建。在build命令中增加通过路径信息生成path_segment_coordinate表的代码逻辑，并增加到现有数据处理流程中，保证每次构建时都会为该hap生成相应的path_segment_coordinate表；

实现将参与构建泛基因组图中的基因组相关的注释数据添加到已有或待构建的hap上的功能。具体要求为：对主流普通格式的注释数据进行读取、解析，提取其中的通用字段和该注释类型的特有字段，写入数据库中annotation表和相关的表，并根据其在基因组即路径上的坐标信息，通过path_segment_coordinate表，生成annotation_span表，因为一个注释，可能跨多个segment，一个segment也会关联多个注释，所以两者是多对多的关系；span的含义即为一条注释在多个segment上的分段，对该概念的理解见prd.md。annotation_span表记录这种关联信息以及注释在对应的segment上的区间坐标，和segment在一个annotation上的顺序。提供在构建hap时导入数据的方式（在build命令中新增--annotations参数，接受注释文件列表）和对已有hap数据进行注释添加/导入的方式（在新增的annotation命令，即对注释信息进行增删改查的命令中的"增加注释"子命令中实现，需要指定hap/subgraph/path名称作为参数，并对注释文件中的数据内容进行验证，确保指定hap中存在相关正确基因组/路径）；

新增annotation命令，使其能够通过注释名称/id、segment名称/id、路径/基因组名称/id、subgraph/hap名称/id、range（坐标区间）/level等各项属性进行注释筛选、增删改查。此处我不是很熟悉这方面行业相关的最佳实践，请你根据类似功能的普遍实现方式，结合本程序和命令的需求和项目库代码设计风格，给出在合适复杂度下的尽可能全面、完善的命令和参数设计；

基于new-mini-example.gfa，编写模拟的注释数据，要求分析该泛基因组图的数据结构，基于真实的科研数据中的泛基因组、基因组注释情况和特征仿照编写，保证主要的同时尽可能多的覆盖不同的注释类型和注释格式，使其成为一个小而精、合理而全面的模拟注释数据。
